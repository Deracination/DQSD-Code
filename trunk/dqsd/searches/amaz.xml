  <search function="amaz">
    <name>Search Amazon.com</name>
    <description>Search specific stores
      including books: "amaz b:harry potter", DVDs: "amaz d:shawshank",
      music: "amaz m:moxy fruvous", toys: "amaz t:mindstorms"
    </description>
    <category>Shopping</category>
    <link>http://amazon.com/</link>
    <contributor>Dan Sanderson</contributor>
    <form name="amzf"
          target="_blank"
          action="http://www.amazon.com/exec/obidos/search-handle-form"
          method="post">
      <input type="hidden" name="index" value="blended"/>
      <input type="hidden" name="field-keywords"/>
    </form>
    <script><![CDATA[
      function amaz(q)
      {
        var qa;
        var nq;

        if (q == "")
        {
          openSearchWindow("http://www.amazon.com/");
        }
        else
        {
          // Check for special store queries, such as !!b:harry potter
          if (qa = q.match(/^(.*):(.*)/)) {
            nq = qa[2];

            if (qa[1] == 'b') {
              document.amzf.index.value="books";
            } else if (qa[1] == 'm') {
              document.amzf.index.value="music";
            } else if (qa[1] == 'd') {
              document.amzf.index.value="dvd";
            } else if (qa[1] == 't') {
              document.amzf.index.value="toys";

            } else {
              // If no single letter matches, use everything
              // before the colon as the store name.
              // For example:  !!kitchen:oxo good grips y-peeler
              document.amzf.index.value=qa[1];
            }

            q = nq;
          }
      
          document.amzf["field-keywords"].value=q;
          submitForm(amzf);
        }
      }
    ]]></script>
  </search>
