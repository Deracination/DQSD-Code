<search function="email">
  <name>Email</name>
  <description>Send an email using default handler: "email recepient(s); subject; body"</description>
  <category>Functions</category>
  <contributor>Glenn Carr</contributor>
  <idea>Nikolai Devereaux</idea>
  <script><![CDATA[
    function email(q)
    {
      var action = "mailto:";
      var tokens = q.split( ';' );
      if( tokens[0] )
      {
        action += tokens[0].replace(/,/, ";");
        if (tokens[1])
        {
          var subject = tokens[1].replace( /^\s/, '' ).replace( /\s$/, '' )
          action += ("?subject=" + subject);
          if (tokens[2])
          {
            var body = tokens[2].replace( /^\s/, '' ).replace( /\s$/, '' )
            action += ("&body=" + body);
          }
        }
      }
      window.location.href = action;
    }
  ]]></script>
</search>
