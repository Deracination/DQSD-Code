<search function="census">
  <name>Census Online</name>
  <description>
    Goto Census Online web pages.<br/>
    <div class="helpboxDescLabels">Examples:</div>
    <table class="helpboxDescTable">
      <tr><td>census mi</td></tr>
      <tr><td>census alaska</td></tr>
    </table>
  </description>
  <link>http://www.census-online.com/links/</link>
  <category>Genealogy</category>
  <contributor>Brent Beardsley</contributor>
  <form name="censusf">

  </form>
  <script src="addons/genealogy/genealogy_lib.js"></script>
  <script><![CDATA[
    function census(q)
    {
      if( nullArgs("census", q) )
        return false;

      if (!genealogy_check_lib_version("1.3")) {
	return false;
      }

      var census_links = genealogy_get_known_page_links("http://www.census-online.com/links/");
      var state = genealogy_parse_place_state(q);
      var county = genealogy_parse_place_county(q);
      var search_place_num = genealogy_lookup_place(state);
      if (search_place_num >= 0) {
	if (county.length > 0) {
	  var webpage = genealogy_get_webpage(census_links[search_place_num]);
	  var links = genealogy_get_page_links(webpage, county);
	  if (links != null && links.length > 0) {
		var linkToOpen = genealogy_build_url(census_links[search_place_num], genealogy_link_get_href(links[0]));
	        openSearchWindow(linkToOpen);
	  } else {
	    openSearchWindow(census_links[search_place_num]);
	  }
	} else {
          openSearchWindow(census_links[search_place_num]);
	}
      } else {
	openSearchWindow("http://www.census-online.com/links/");
      }
    }
    ]]>
  </script>
</search>
