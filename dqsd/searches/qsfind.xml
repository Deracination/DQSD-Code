<search function="qsfind">
  <name>Quick Search Find</name>
  <description>Find information about quick search functions by searching through their
  	descriptions.  Click on the search function name in the resuling popup to fill
  	the search text box with the function name: "qsfind phone number"
  </description>
  <contributor>Neel Doshi</contributor>
  <category>Quick Search Administration</category>
  <script><![CDATA[
    function qsfind(q)
    {
	    if (q == "")
	    {
	    	about();
	    	return false;
	    }
	    if (nullArgs("qsfind", q))
	    	return false;

	    var switch_list = new Array("function");
		var args = parseArgs(q, switch_list);

	    // Create an array to store the search results.
	    var SearchResults = new Array();
	    var SearchFound = false;
	    if ( typeof args.switch_val["function"] != "undefined")
	    {
	    	if ( typeof searches[args.q] != "undefined" )
	    	{
	    		SearchResults[args.q] = searches[args.q];
				SearchFound = true;
			}
	    }
	    else
	    {
			for (var i in searches)
			{
				if (isNaN(i))
				{
					if( searches[i].desc.toLowerCase().match(args.q) || searches[i].name.toLowerCase().match(args.q) || (searches[i].link ? searches[i].link.toLowerCase().match(args.q) : 0) )
					{
						SearchResults[i] = searches[i];
						SearchFound = true;
					}
				}
			}
		}

		if (SearchFound)
		{
			//  Define the popup's final width
			var windowW = 300;
			var QSFPopup = window.createPopup();
			var QSFPopupBody = QSFPopup.document.body;
  			var QFSBodyCode = "<table align=left border=0 cellspacing=1 cellpadding=2 width=" + (windowW - 5) +
  				"><tr><td valign=top><style>" + convertStylesToInline() + "</style>";

			//  Loop through the results to build the table in the popup
			for (var i in SearchResults)
			{
			    var search = SearchResults[i];
		        QFSBodyCode += "<tr><td valign=top class=helpboxCommands>";
		        for (var j = 0; j < search.aliases.length; j++)
		        {
					var alias = search.aliases[j].replace(/&/g, "&amp;").replace(/</g, "&lt;");
					if (alias.substr(0,INTERNAL_FUNC_PREFIX.length) == INTERNAL_FUNC_PREFIX)
						continue;
					if (alias == "" || alias == " ")
					{
						var default_alias_text = "<em>Enter</em>";
						alias = default_alias_text;
					}

					if (j > 0)
					{
						// because some puctuation causes problems with the javascript
						// text box population, create an alias link only if there
						// isn't punctuation in the alias.
						if (alias != "" && alias != " " && alias.search(/\W/) == -1 )
							QFSBodyCode += "<a class=helpboxAlias onMouseUp=parent.document.deff.q.value='" + alias + "'>";
						else
							QFSBodyCode += "<a class=helpboxAlias>"
					}
					else
					{
						// Create a link that allows the user to populate the form field with
						// the function name
						QFSBodyCode += "<a class=helpboxCommandLink href='' onMouseUp=parent.document.deff.q.value='" + alias + "'>";
					}

					QFSBodyCode += alias;
					QFSBodyCode += "</a>";

					if (j < search.aliases.length)
						QFSBodyCode += "<br>"
		        }
				QFSBodyCode += "</td><td valign=top class=helpboxDescriptions>";
				if (search.link)
					QFSBodyCode += "<a class=helpboxLink href='' onMouseUp=parent.openSearchWindow('" + search.link + "');>" + search.name + "</a>";
				else
					QFSBodyCode += "<a class=helpboxSearchName>" + search.name + "</a>";
				if (search.desc)
				{
					// If the search author put a nobr tag in the description, remove it to avoid
					// breaking the table width.
					QFSBodyCode += " - " + search.desc.replace("nobr>", "a>");
				}
				QFSBodyCode += "</td></tr>";
			}
			QFSBodyCode += "</table>";
			QSFPopupBody.innerHTML = QFSBodyCode;
  			QSFPopupBody.document.body.style.border="outset 2px";
  			QSFPopupBody.document.body.style.background='menu';

			// Temporatily show the popup to determine the proper final
			// height for the popup.
			QSFPopup.show(0, 0, windowW, 100);
			var windowH = QSFPopupBody.scrollHeight + 6;
			QSFPopup.hide();

			// Put a cap on the popup height
			if (windowH  > window.screen.height-30)
			{
				windowH = window.screen.height-30;
			}

			//QSFPopup.show(20, -20-windowH, windowW, windowH, document.body);
			QSFPopup.show((buttonalign == "left" ? 0 : document.body.clientWidth - windowW), -windowH, windowW, windowH, document.body);
			return true;
		}
		else
			alert("No searches match your search criteria - " + q);
		return false;
    }
  ]]></script>
</search>