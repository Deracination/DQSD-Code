  <search function="cddb">
    <name>CDDB Music Search</name>
    <description>Search Gracenote CDDB by artist /a, title /t, or song /s, or a combination: <nobr>"cddb Madonna /at"</nobr></description>
    <category>Entertainment</category>
    <link>http://www.cddb.com/</link>
    <form name="cdbf"
          target="_blank"
          action="http://www.cddb.com/php/search1.php3">
      <input type="hidden" name="f"/>
      <input type="hidden" name="q"/>
    </form>
    <script><![CDATA[
      // cddb
      function cddb(q)
      {
        var res = q.match(/([^\/]+)((\/)[ats]+)?/);

        if (!res)
        {
           openSearchWindow("http://www.cddb.com/");
        }
        else
        {
          var dope = "";
          if ((res[2].indexOf('a') > -1) || (res[2].indexOf('A') > -1))
            dope += "artist ";
          if ((res[2].indexOf('t') > -1) || (res[2].indexOf('T') > -1))
            dope += "disc ";
          if ((res[2].indexOf('s') > -1) || (res[2].indexOf('S') > -1))
            dope += "track ";

          document.cdbf.q.value=(res[1] ? res[1] : "");
          document.cdbf.f.value=(res[2] ? dope : "artist");
          submitForm(cdbf);
        }
      }
    ]]></script>
  </search>
